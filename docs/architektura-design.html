<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="utf-8">
    <title>5. Architektúra és Design Patterns – Fejlesztői dokumentáció</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <div id="sidebar">
        <h2><i class="fa fa-list"></i> Tartalom</h2>
        <nav id="toc">
            <ul>
                <li><a href="index.html"><i class="fa fa-home"></i> Főoldal</a></li>
                <li><a href="laravel-framework.html">1. Laravel Framework áttekintés</a></li>
                <li><a href="projekt-felepites.html">2. Projekt felépítés</a></li>
                <li><a href="laravel-csomagok.html">3. Laravel csomagok</a></li>
                <li><a href="implementalt-funkciok.html">4. Implementált funkciók</a></li>
                <li><a href="#sec5" class="active">5. Architektúra és Design Patterns</a>
                    <ul>
                        <li><a href="#sec5_1" class="level-2">5.1 Domain Driven Design</a></li>
                        <li><a href="#sec5_2" class="level-2">5.2 Event-Driven Architecture</a></li>
                        <li><a href="#sec5_3" class="level-2">5.3 Service Layer Pattern</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
    </div>

    <header>
        <h1><i class="fa fa-sitemap"></i> 5. Architektúra és Design Patterns</h1>
        <p>Enterprise szintű architekturális minták és tervezési megoldások a TTK rendszerben</p>
        <div style="margin-top:1rem">
            <span class="badge badge-primary">SOLID Principles</span>
            <span class="badge badge-success">Clean Architecture</span>
            <span class="badge badge-info">DDD</span>
            <span class="badge badge-warning">Event-Driven</span>
        </div>
    </header>

    <main id="content">
        <section id="sec5">
            <h2><i class="fa fa-sitemap"></i> 5. Architektúra és Design Patterns</h2>

            <div class="info-box">
                <strong><i class="fa fa-info-circle"></i> Fejezet áttekintés:</strong> 
                A TTK ügyintézési rendszer modern szoftver architekturális elveket és design pattern-eket követ, biztosítva a fenntarthatóságot, skálázhatóságot és tesztelhetőséget. Ez a fejezet részletesen bemutatja a rendszerben alkalmazott architekturális döntéseket és implementációs mintákat.
            </div>

            <div class="feature-grid">
    <div class="feature-card">
        <h4><i class="fa fa-layer-group"></i> Architekturális rétegek</h4>
        <ul>
            <li><strong>Prezentációs réteg:</strong> Webes felület és REST API</li>
            <li><strong>Alkalmazási réteg:</strong> Use case koordináció</li>
            <li><strong>Domain réteg:</strong> Üzleti logika és szabályok</li>
            <li><strong>Infrastruktúra réteg:</strong> Adatbázis, külső szolgáltatások</li>
            <li><strong>Keresztmetszeti felelősségek:</strong> Naplózás, cache-elés, biztonság</li>
        </ul>
    </div>
    <div class="feature-card">
        <h4><i class="fa fa-puzzle-piece"></i> Design Patterns alkalmazása</h4>
        <ul>
            <li><strong>Domain Driven Design (DDD):</strong> Aggregátumok és események használata a domain logika strukturálására</li>
            <li><strong>Eseményvezérelt architektúra:</strong> Transition események és observer-ek</li>
            <li><strong>Repository minta:</strong> Perzisztencia réteg elkülönítése a domain logikától</li>
            <li><strong>Service Layer pattern:</strong> Komplex use case-ek kezelése szolgáltatási rétegen keresztül</li>
            <li><strong>Factory minta:</strong> Objektumok létrehozásának centralizálása</li>
        </ul>
    </div>
	</div>

                

            <div class="architecture-diagram">
                <h4>TTK Rendszer Architekturális Overview</h4>
                <pre>
┌─────────────────────────────────────────────────────────────────┐
│                    Presentation Layer                           │
├─────────────────────────────────────────────────────────────────┤
│  Web Controllers  │  API Controllers  │  CLI Commands │ Events │
├─────────────────────────────────────────────────────────────────┤
│                     Application Layer                           │
├─────────────────────────────────────────────────────────────────┤
│  Use Case Services │ Command Handlers │ Query Handlers │
├─────────────────────────────────────────────────────────────────┤
│                      Domain Layer                               │
├─────────────────────────────────────────────────────────────────┤
│ Domain Models │ Business Rules │ Domain Events │ Value Objects │
├─────────────────────────────────────────────────────────────────┤
│                   Infrastructure Layer                          │
├─────────────────────────────────────────────────────────────────┤
│ Repositories │ External APIs │ File Storage │ Email │ Database │
└─────────────────────────────────────────────────────────────────┘

Cross-cutting Concerns: Security, Logging, Caching, Validation
</pre>
                <p>A diagram bemutatja az általános réteget és a modul-specifikus réteget, ahol a modul-specifikus réteg az általános rétegre épül.</p>
            </div>
        </section>

        
<section id="sec5_1">
    <h2>5.1 Domain Driven Design (DDD) implementáció</h2>
    <p>A domain-központú tervezés során a <code>Modules/EmployeeRecruitment/App/Models/RecruitmentWorkflow</code> modellt használjuk, amely mint aggregátum gyökér (aggregate root) reprezentálja a toborzási folyamat állapotát és szabályait.</p>
    <p>A domain logika az állapotátmeneteket a Symfony Workflow komponens és a ZeroDaHero Laravel Workflow csomag segítségével valósítja meg: a <code>config/workflow.php</code> fájl definiálja a lehetséges állapotokat (places) és átmeneteket (transitions), ezáltal a domain szabályok könnyen átlátható formában kerülnek konfigurálásra.</p>
    <p>Az eseményvezérelt megközelítés keretében minden átmenethez tartozó események (Symfony Workflow events) segítségével hajtunk végre értesítéseket, audit naplózást és további üzleti műveleteket, így a domain réteg tiszta és egységessé válik.</p>
    <p>A repository pattern használatával a perzisztencia részleteit elkülönítjük a domain logikától, az <code>EmployeeRecruitmentRepository</code> interfész és annak implementációja szolgáltatja az adatelérést, ezzel tovább erősítve a modell függetlenségét.</p>
</section>

    
<section id="sec5_2">
    <h2>5.2 Eseményvezérelt architektúra</h2>
    <p>A rendszer eseményvezérelt architektúrája a Laravel beépített esemény-kezelőjére (Event Dispatcher) épül, amely lehetővé teszi, hogy a domain és infrastruktúra komponensek laza csatolással kommunikáljanak egymással.</p>
    <p>Például a <code>Modules/EmployeeRecruitment/App/Events</code> mappában definiált domain események (pl. <code>RecruitmentWorkflowStateChanged</code>) kerülnek dispatch-elésre a <code>dispatch(new RecruitmentWorkflowStateChanged($workflow));</code> hívással. A <code>Modules/EmployeeRecruitment/App/Listeners</code> mappában található listener-ek kezelik az eseményeket, végrehajtva értesítéseket, audit naplózást vagy további aszinkron műveleteket.</p>
    <pre><code>// Példa esemény dispatch
event(new RecruitmentWorkflowStateChanged($workflow));
    </code></pre>
</section>

<section id="sec5_3">
    <h2>5.3 Service Layer Pattern</h2>
    <p>A Service Layer Pattern célja, hogy a komplex üzleti logika ne a kontrollerekben, hanem dedikált szolgáltatási osztályokban (services) helyezkedjen el. A TTK rendszernél a <code>Modules/EmployeeRecruitment/App/Services</code> mappában található szolgáltatások (pl. <code>RecruitmentWorkflowService</code>) felelősek a toborzási folyamat lépéseinek koordinálásáért.</p>
    <p>A service-ek így jól tesztelhetőek unit tesztekkel, mivel egyszerűen izolálhatók, és a kontrollerek csak a megfelelő service metódusokat hívják.</p>
</section>
</main>

    <footer>
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <a href="implementalt-funkciok.html" style="color: #666; text-decoration: none;">
                    <i class="fa fa-arrow-left"></i> Előző: 4. Implementált funkciók
                </a>
            </div>
            <div>
                <strong>TTK Ügyintézés</strong> · Architektúra és Design Patterns · 2025
            </div>
            <div>
                <a href="fejlesztoi-utmutatok.html" style="color: #666; text-decoration: none;">
                    Következő: 6. Fejlesztői útmutatók <i class="fa fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </footer>

    <script>
        // Navigáció kiemelés és smooth scrolling
        document.addEventListener('DOMContentLoaded', function() {
            // Aktuális szekció kiemelése az oldalsávban
            const currentSection = window.location.hash || '#sec5';
            document.querySelector(`a[href="${currentSection}"]`)?.classList.add('active');
            
            // Smooth scrolling az anchor linkekhez
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                        
                        // URL frissítése navigáció kiváltása nélkül
                        history.pushState(null, null, this.getAttribute('href'));
                    }
                });
            });

            // Aktív szekció frissítése görgetéskor
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        document.querySelectorAll('#sidebar a').forEach(link => {
                            link.classList.remove('active');
                        });
                        document.querySelector(`#sidebar a[href="#${id}"]`)?.classList.add('active');
                    }
                });
            }, { threshold: 0.5 });

            document.querySelectorAll('section[id]').forEach(section => {
                observer.observe(section);
            });
        });
    </script>
</body>
</html>